# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Tela_Buscar_Casos:
    Properties:
      Fill: =RGBA(245, 246, 248, 1)
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |-
        =/*Refresh('SAVe_Forms_Demo');;
        If(
            CountA('SAVe_Forms_Demo'.ID) <> CountA(_localData.ID) && !_atualizando;
            If(
                _meuCargo <> "Administrador";
                ClearCollect(
                    _localData;
                    Filter(
                        'SAVe_Forms_Demo';
                        'Criado por'.DisplayName = User().FullName
                    )
                );
                ClearCollect(
                    _localData;
                    'SAVe_Forms_Demo'
                )
            );;
            ForAll(
                _localData As LinhaAtual;
                If(
                    !(LinhaAtual.ID in _TabelaCasos.ID) || Text(LinhaAtual.Modificado) <> LookUp(
                        _TabelaCasos;
                        ID = LinhaAtual.ID;
                        Data
                    );
                    Concurrent(
                        With(
                            {
                                registroJson: ParseJSON(
                                    LookUp(
                                        _localData;
                                        ID = LinhaAtual.ID;
                                        Socio_Identificacao
                                    )
                                )
                            };
                            Patch(
                                _TabelaCasos;
                                If(
                                    IsBlank(
                                        LookUp(
                                            _TabelaCasos;
                                            ID = LinhaAtual.ID
                                        )
                                    );
                                    Defaults(_TabelaCasos);
                                    {ID: LinhaAtual.ID}
                                );
                                {
                                    ID: LinhaAtual.ID;
                                    Nome: Text(registroJson.Nome_Registro_Civil);
                                    Num_Procedimento: Text(registroJson.Procedimento);
                                    Tipo_Vitima: Text(registroJson.Classificacao_Vitima);
                                    Crimes_Vida: Text(registroJson.Crimes_Vida);
                                    Crimes_Sexual: Text(registroJson.Crimes_Sexual);
                                    Crimes_Odio: Text(registroJson.Crimes_Odio);
                                    Crimes_Outros: Text(registroJson.Crimes_Outros);
                                    Classificacao_Crime: Text(registroJson.Classificacao_Crime);
                                    Responsaveis: Table(
                                        {
                                            cargo: [Blank()];
                                            nome: "";
                                            area: [Blank()]
                                        }
                                    );
                                    Encerrado: Boolean(registroJson.Encerrado);
                                    Data: Text(LinhaAtual.Modificado);
                                    Comarca: Text(registroJson.Municipio_Origem)
                                }
                            )
                        );;
                        With(
                            {
                                registroJson: ParseJSON(
                                    LookUp(
                                        _localData;
                                        ID = LinhaAtual.ID;
                                        Dados_de_Entrada
                                    )
                                )
                            };
                            Patch(
                                _TabelaCasos;
                                {ID: LinhaAtual.ID};
                                {
                                    Num_Procedimento: Text(registroJson.Procedimento);
                                    Tipo_Vitima: Text(registroJson.Classificacao_Vitima);
                                    Classificacao_Crime: Text(registroJson.Classificacao_Crime);
                                    Crimes_Vida: Text(registroJson.Crimes_Vida);
                                    Crimes_Sexual: Text(registroJson.Crimes_Sexual);
                                    Crimes_Odio: Text(registroJson.Crimes_Odio);
                                    Crimes_Outros: Text(registroJson.Crimes_Outros);
                                    Comarca: Text(registroJson.Municipio_Origem)
                                }
                            )
                        );
                        With(
                            {
                                registroJson: ParseJSON(
                                    LookUp(
                                        'SAVe_Forms_Demo';
                                        ID = LinhaAtual.ID;
                                        Acompanhamento
                                    )
                                )
                            };
                            ForAll(
                                registroJson.Pessoas_Acompanhamento;
                                Patch(
                                    _TabelaCasosResponsaveis;
                                    If(
                                        IsBlank(
                                            LookUp(
                                                _TabelaCasosResponsaveis;
                                                ID_Caso = LinhaAtual.ID
                                            )
                                        );
                                        Defaults(_TabelaCasosResponsaveis);
                                        {ID_Caso: LinhaAtual.ID}
                                    );
                                    {
                                        cargo: ForAll(
                                            ThisRecord.cargo As cargo;
                                            {Value: Text(cargo.Value)}
                                        );
                                        nome: Text(ThisRecord.nome);
                                        ID_Caso: Value(ThisRecord.ID_Caso);
                                        area: ForAll(
                                            ThisRecord.area As area;
                                            {Value: Text(area.Value)}
                                        )
                                    }
                                )
                            )
                        )
                    );;
                    Patch(
                        _TabelaCasos;
                        {ID: LinhaAtual.ID};
                        {
                            Encerrado: Boolean(
                                LookUp(
                                    'SAVe_Forms_Demo';
                                    ID = LinhaAtual.ID;
                                    Encerrado
                                )
                            );
                            Responsaveis_Psicossocial: With(
                                {
                                    Responsaveis: Filter(
                                        _TabelaCasosResponsaveis;
                                        ID_Caso = LinhaAtual.ID && "Psicossocial" = First(area).Value && !IsBlank(nome)
                                    )
                                };
                                If(
                                    !IsEmpty(Responsaveis);
                                    Concat(Responsaveis; nome; Char(10));
                                    "*Pendente Preenchimento*"
                                )
                            );
                            Responsaveis_Juridico: With(
                                {
                                    Responsaveis: Filter(
                                        _TabelaCasosResponsaveis;
                                        ID_Caso = LinhaAtual.ID && "Direito" = First(area).Value && !IsBlank(nome)
                                    )
                                };
                                If(
                                    !IsEmpty(Responsaveis);
                                    Concat(Responsaveis; nome; Char(10));
                                    "*Pendente Preenchimento*"
                                )
                            )
                        }
                    )
                )
            )
        )*/
    Children:
      - MenuSuperior_15:
          Control: CanvasComponent
          ComponentName: MenuSuperior
          Properties:
            Height: =60
            Width: =1346
            X: =10
            Y: =10
      - ContainerFundoTopo:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Height: =65
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutDirection: =LayoutDirection.Horizontal
            LayoutGap: =8
            LayoutJustifyContent: =LayoutJustifyContent.Center
            PaddingLeft: =10
            PaddingRight: =20
            Width: =Parent.Width - 20
            X: =10
            Y: =80
          Children:
            - ContNumID:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height - 12
                  LayoutMinWidth: =80
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =80
                Children:
                  - TituloNumID:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =16
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "ID_Caso",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "ID_Caso" <> _filtro,
                              Set(
                                  _filtro,
                                  "ID_Caso"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="ID"
                        Width: =Parent.Width
            - ContNumProcesso:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =170
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =175
                Children:
                  - TituloNumProcedimento:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =16
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Num_Procedimento",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Num_Procedimento" <> _filtro,
                              Set(
                                  _filtro,
                                  "Num_Procedimento"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="N° PROCESSO"
                        Width: =Parent.Width
            - ContNome:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =160
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =180
                Children:
                  - TituloNome:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =16
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Nome",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Nome" <> _filtro,
                              Set(
                                  _filtro,
                                  "Nome"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="NOME"
                        Width: =Parent.Width
            - ContComarca:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =160
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =150
                Children:
                  - TituloComarca:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =16
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Comarca",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Comarca" <> _filtro,
                              Set(
                                  _filtro,
                                  "Comarca"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="COMARCA"
                        Width: =Parent.Width
            - ContRespPsico:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =140
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =120
                Children:
                  - TituloRespPsico:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =14
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Psicossocial",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Psicossocial" <> _filtro,
                              Set(
                                  _filtro,
                                  "Psicossocial"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="RESP. PSICOSSOCIAL"
                        Width: =Parent.Width
                  - PeliculaBloqueadora:
                      Control: Rectangle@2.3.0
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =Parent.Height
                        Width: =Parent.Width
            - ContRespJuri:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =140
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =120
                Children:
                  - TituloRespJuri:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =14
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Direito",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Direito" <> _filtro,
                              Set(
                                  _filtro,
                                  "Direito"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="RESP. JURÍDICO"
                        Width: =Parent.Width
                  - PeliculaBloqueadora_1:
                      Control: Rectangle@2.3.0
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Fill: =RGBA(0, 0, 0, 0)
                        Height: =Parent.Height
                        Width: =Parent.Width
            - ContTipoVitima:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =150
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =160
                Children:
                  - TituloTipoVitima:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =14
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Tipo_Vitima",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Tipo_Vitima" <> _filtro,
                              Set(
                                  _filtro,
                                  "Tipo_Vitima"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="TIPO DE VITIMA"
                        Width: =Parent.Width
            - ContTipoCrime:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =140
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =160
                Children:
                  - TituloTipoCrime:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =14
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Tipo_Crime",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Tipo_Crime" <> _filtro,
                              Set(
                                  _filtro,
                                  "Tipo_Crime"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="TIPO DE CRIME"
                        Width: =Parent.Width
            - ContData:
                Control: GroupContainer@1.3.0
                Variant: ManualLayout
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  DropShadow: =DropShadow.Semilight
                  Fill: =ColorFade(cor.tema, 40%)
                  Height: =45
                  LayoutMinHeight: =Parent.Height
                  LayoutMinWidth: =110
                  RadiusBottomLeft: =5
                  RadiusBottomRight: =5
                  RadiusTopLeft: =5
                  RadiusTopRight: =5
                  Width: =70
                Children:
                  - TituloData:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =ColorFade(cor.tema, 40%)
                        Font: =Font.'Lato Black'
                        FontSize: =14
                        FontWeight: =FontWeight.Normal
                        Height: =Parent.Height
                        Icon: |-
                          =If(
                              _filtro = "Modified",
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  "ArrowUp",
                                  If(
                                      _ordemFiltro = SortOrder.Descending,
                                      "ArrowDown",
                                      Blank()
                                  )
                              )
                          )
                        Layout: ='ButtonCanvas.Layout'.IconAfter
                        OnSelect: |-
                          =If(
                              "Modified" <> _filtro,
                              Set(
                                  _filtro,
                                  "Modified"
                              );
                              Set(
                                  _ordemFiltro,
                                  SortOrder.Ascending
                              ),
                              If(
                                  _ordemFiltro = SortOrder.Ascending,
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Descending    
                                  ),
                                  Set(
                                      _ordemFiltro,
                                      SortOrder.Ascending
                                  )
                              )
                          )
                        Text: ="DATA"
                        Width: =Parent.Width
      - ContFundoGal:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =610
            Width: =1346
            X: =10
            Y: =ContainerFundoTopo.Y + ContainerFundoTopo.Height + 5
          Children:
            - GalCasos:
                Control: Gallery@2.15.0
                Variant: BrowseLayout_Vertical_OneTextVariant_ver5.0
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  DelayItemLoading: =false
                  Height: =Parent.Height
                  Items: |-
                    =SortByColumns(
                        Filter(
                            If(
                                !IsNumeric(MenuBuscar_1.TextoBusca),
                                Search(
                                    ShowColumns(
                                        If(
                                            _meuCargo <> "Administrador",
                                            Filter(
                                                SAVe_Geral,
                                                'Criado por'.Email = User().Email
                                            ),
                                            SAVe_Geral
                                        ),
                                        ID_Caso,
                                        Num_Processo,
                                        Nome,
                                        Comarca,
                                        //Resp_Psicossocial;
                                        //Resp_Juridico;
                                        Tipo_Vitima,
                                        Tipo_Crime,
                                        Data,
                                        Tipo_Form,
                                        Encerrado,
                                        Modificado
                                    ),
                                    MenuBuscar_1.TextoBusca,
                                    Num_Processo,
                                    Nome,
                                    Comarca,
                                    //Resp_Psicossocial;
                                    //Resp_Juridico;
                                    Tipo_Vitima,
                                    Tipo_Crime,
                                    Data
                                ),
                                ShowColumns(
                                    SortByColumns(
                                        If(
                                            _meuCargo <> "Administrador",
                                            Filter(
                                                SAVe_Geral,
                                                'Criado por'.Email = User().Email
                                            ),
                                            SAVe_Geral
                                        ),
                                        "Modified",
                                        SortOrder.Descending
                                    ),
                                    ID_Caso,
                                    Num_Processo,
                                    Nome,
                                    Comarca,
                                    //Resp_Psicossocial;
                                    //Resp_Juridico;
                                    Tipo_Vitima,
                                    Tipo_Crime,
                                    Data,
                                    Tipo_Form,
                                    Encerrado,
                                    Modificado
                                )
                            ),
                            If(
                                MenuBuscar_1.buscarCasosArquivados,
                                Boolean(Encerrado) = true,
                                Boolean(Encerrado) = false
                            ) && If(
                                IsNumeric(MenuBuscar_1.TextoBusca),
                                Value(MenuBuscar_1.TextoBusca) = ID_Caso,
                                true
                            )
                        ),
                        _filtro,
                        _ordemFiltro
                    )
                  Transition: =Transition.Pop
                  Width: =Parent.Width
                Children:
                  - ContainerFundoTopo_1:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        Height: =77 //+ RoundDown(Len(TituloRespJuriGal.Text) / 30; 0) * 5
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutDirection: =LayoutDirection.Horizontal
                        LayoutGap: =ContainerFundoTopo.LayoutGap
                        LayoutJustifyContent: =LayoutJustifyContent.Center
                        PaddingLeft: =10
                        PaddingRight: =20
                        Width: =1346
                        Y: =8
                      Children:
                        - ContNumID_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =If(!ThisItem.Encerrado, ColorFade(cor.tema, 65%), ColorFade(Color.Red, 65%))
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContNumID.Width
                            Children:
                              - TituloNumID_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.'Lato Black'
                                    FontColor: =cor.fundoClaro
                                    Height: =Parent.Height
                                    Size: =18
                                    Text: =ThisItem.ID_Caso
                                    VerticalAlign: =VerticalAlign.Middle
                                    Width: =Parent.Width
                        - ContNumProcesso_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContNumProcesso.Width
                            Children:
                              - TituloNumProcedimento_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(!(Self.Text = "*Pendente Preenchimento*"), cor.fundoClaro, Color.Red)
                                    Height: =Parent.Height
                                    Size: =12
                                    Text: |-
                                      =//If(!IsBlank(ThisItem.Num_Processo);ThisItem.Num_Processo; "*Pendente Preenchimento*")
                                      If(
                                          !IsBlank(
                                              LookUp(
                                                  SAVe_DadosDeEntrada,
                                                  ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                                  N_procedimento_MPE
                                              )
                                          ),
                                          LookUp(
                                              SAVe_DadosDeEntrada,
                                              ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                              N_procedimento_MPE
                                          ),
                                          "*Pendente Preenchimento*"
                                      )
                                    VerticalAlign: =VerticalAlign.Middle
                                    Width: =Parent.Width
                        - ContNome_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContNome.Width
                            Children:
                              - TituloNome_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(!(Self.Text = "*Pendente Preenchimento*"), cor.fundoClaro, Color.Red)
                                    Height: =Parent.Height
                                    Size: =13
                                    Text: |-
                                      =/*If(
                                          !IsBlank(
                                              LookUp(
                                                  SAVe_DadosDeEntrada;
                                                  ThisRecord.ID_Caso = ThisItem.ID_Caso;
                                                  PE_nome
                                              )
                                          );
                                          LookUp(
                                              SAVe_DadosDeEntrada;
                                              ThisRecord.ID_Caso = ThisItem.ID_Caso;
                                              PE_nome
                                          );
                                          "*Pendente Preenchimento*"
                                      )*/
                                      If(
                                          !IsBlank(
                                              ThisItem.Nome
                                          ),
                                          ThisItem.Nome,
                                          "*Pendente Preenchimento*"
                                      )
                                    VerticalAlign: =VerticalAlign.Middle
                                    Width: =Parent.Width
                        - ContComarca_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContComarca.Width
                            Children:
                              - TituloComarca_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(!(Self.Text = "*Pendente Preenchimento*"), cor.fundoClaro, Color.Red)
                                    Height: =Parent.Height
                                    Size: =11
                                    Text: |-
                                      =If(
                                          !IsBlank(
                                              LookUp(
                                                  SAVe_DadosDeEntrada,
                                                  ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                                  Comarca_origem
                                              )
                                          ),
                                          LookUp(
                                              SAVe_DadosDeEntrada,
                                              ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                              Comarca_origem
                                          ),
                                          "*Pendente Preenchimento*"
                                      )
                                    VerticalAlign: =VerticalAlign.Middle
                                    Width: =Parent.Width
                        - ContRespPsico_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContRespPsico.Width
                            Children:
                              - TituloRespPsicoCasos:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(Self.Text = "*Pendente Preenchimento*", Color.Red, cor.fundoClaro)
                                    Height: =Parent.Height
                                    Size: =11
                                    Text: |-
                                      =With(
                                          {
                                              varAcomp: Filter(SAVe_Acompanhamentos, ID_Caso = ThisItem.ID_Caso)
                                          },
                                          With(
                                              {
                                                  varTodosResp: Ungroup(AddColumns(varAcomp, Resp, Responsaveis), Resp)
                                              },
                                              With(
                                                  {
                                                      varIDs: ShowColumns(varTodosResp, Id),
                                                      varPsico: Filter(SAVe_Responsaveis, Area = "Psicossocial")
                                                  },
                                                  With(
                                                      {
                                                          varMatch: Filter(varPsico, ID in varIDs)
                                                      },
                                                      If(
                                                          CountRows(varMatch) = 0,
                                                          "*Pendente Preenchimento*",
                                                          Concat(Distinct(varMatch, Nome), Value, ", ")
                                                      )
                                                  )
                                              )
                                          )
                                      )
                                      /*If(
                                          IsBlankOrError(
                                              Concat(
                                                  Filter(
                                                      ShowColumns(SAVe_Responsaveis; ID; Area; Nome);
                                                      Area = "Psicossocial" &&
                                                      ID in ShowColumns(
                                                          LookUp(SAVe_Acompanhamentos; ID_Caso = ThisItem.ID_Caso; Responsaveis);
                                                          Id
                                                      )
                                                  );
                                                  Nome;
                                                  ", "
                                              )
                                          );
                                          "*Pendente Preenchimento*";
                                          Concat(
                                              Filter(
                                                  ShowColumns(SAVe_Responsaveis; ID; Area; Nome);
                                                  Area = "Psicossocial" &&
                                                  ID in ShowColumns(
                                                      LookUp(SAVe_Acompanhamentos; ID_Caso = ThisItem.ID_Caso; Responsaveis);
                                                      Id
                                                  )
                                              );
                                              Nome;
                                              ", 
                                              "
                                          )
                                      )*/
                                    VerticalAlign: =VerticalAlign.Middle
                                    Width: =Parent.Width
                        - ContRespJuriGal:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContRespJuri.Width
                            Children:
                              - TituloRespJuriGal:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(Self.Text = "*Pendente Preenchimento*", Color.Red, cor.fundoClaro)
                                    Height: =Parent.Height
                                    Size: =11
                                    Text: |-
                                      =With(
                                          {
                                              varAcomp: Filter(SAVe_Acompanhamentos, ID_Caso = ThisItem.ID_Caso)
                                          },
                                          With(
                                              {
                                                  varTodosResp: Ungroup(AddColumns(varAcomp, Resp, Responsaveis), Resp)
                                              },
                                              With(
                                                  {
                                                      varIDs: ShowColumns(varTodosResp, Id),
                                                      varDireito: Filter(SAVe_Responsaveis, Area = "Direito")
                                                  },
                                                  With(
                                                      {
                                                          varMatch: Filter(varDireito, ID in varIDs)
                                                      },
                                                      If(
                                                          CountRows(varMatch) = 0,
                                                          "*Pendente Preenchimento*",
                                                          Concat(Distinct(varMatch, Nome), Value, ", ")
                                                      )
                                                  )
                                              )
                                          )
                                      )

                                      /*QuaseIf(
                                          IsBlankOrError(
                                              Concat(
                                                  Filter(
                                                      SAVe_Responsaveis;
                                                      Area = "Direito" &&
                                                      "Email" in Concat(
                                                          LookUp(SAVe_Acompanhamentos; ID_Caso = ThisItem.ID_Caso).Responsaveis;
                                                          "Email";
                                                          ","
                                                      )
                                                  );
                                                  Nome;
                                                  ", "
                                              )
                                          );
                                          "*Pendente Preenchimento*";
                                          Concat(
                                              Filter(
                                                  ShowColumns(SAVe_Responsaveis; ID; Area; Nome);
                                                  Area = "Direito" &&
                                                  ID in ShowColumns(
                                                      LookUp(SAVe_Acompanhamentos; ID_Caso = ThisItem.ID_Caso; Responsaveis);
                                                      Id
                                                  )
                                              );
                                              Nome;
                                              ", 
                                              "
                                          )
                                      )*/

                                      /*If(
                                          IsBlankOrError(
                                              Concat(
                                                  Filter(
                                                      ShowColumns(SAVe_Responsaveis; ID; Area; Nome);
                                                      Area = "Direito" &&
                                                      ID in ShowColumns(
                                                          LookUp(SAVe_Acompanhamentos; ID_Caso = ThisItem.ID_Caso; Responsaveis);
                                                          Id
                                                      )
                                                  );
                                                  Nome;
                                                  ", "
                                              )
                                          );
                                          "*Pendente Preenchimento*";
                                          Concat(
                                              Filter(
                                                  ShowColumns(SAVe_Responsaveis; ID; Area; Nome);
                                                  Area = "Direito" &&
                                                  ID in ShowColumns(
                                                      LookUp(SAVe_Acompanhamentos; ID_Caso = ThisItem.ID_Caso; Responsaveis);
                                                      Id
                                                  )
                                              );
                                              Nome;
                                              ", 
                                              "
                                          )
                                      )*/
                                    VerticalAlign: =VerticalAlign.Middle
                                    Width: =Parent.Width
                        - ContTipoVitimaGal:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.Center
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              LayoutMinWidth: =150
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =140
                              X: =40
                              Y: =40
                            Children:
                              - TituloTipoVitima_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(!(Self.Text = "*Pendente Preenchimento*"), cor.fundoClaro, Color.Red)
                                    Height: =Parent.Height
                                    Size: =12
                                    Text: |-
                                      =If(
                                          !IsBlank(
                                              LookUp(
                                                  SAVe_DadosDeEntrada,
                                                  ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                                  Classificacao_vitima
                                              )
                                          ),
                                          LookUp(
                                              SAVe_DadosDeEntrada,
                                              ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                              Classificacao_vitima
                                          ),
                                          "*Pendente Preenchimento*"
                                      )
                                    VerticalAlign: =VerticalAlign.Middle
                                    Width: =Parent.Width
                        - ContTipoCrime_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContTipoCrime.Width
                            Children:
                              - TituloTipoCrime_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(!(Self.Text = "*Pendente Preenchimento*"), cor.fundoClaro, Color.Red)
                                    Height: =Parent.Height
                                    Size: =9
                                    Text: |-
                                      =If(
                                          IsBlankOrError(
                                              Substitute(
                                                  LookUp(
                                                      SAVe_DadosDeEntrada,
                                                      ID_Caso = ThisItem.ID_Caso,
                                                      Crime_relacionado
                                                  ),
                                                  ";",
                                                  Char(10)
                                              )
                                          ),
                                          "*Pendente Preenchimento*",
                                          Substitute(
                                              LookUp(
                                                  SAVe_DadosDeEntrada,
                                                  ID_Caso = ThisItem.ID_Caso,
                                                  Crime_relacionado
                                              ),
                                              ";",
                                              Char(10)
                                          )
                                      )
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =Parent.Width
                        - ContData_1:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              AlignInContainer: =AlignInContainer.SetByContainer
                              DropShadow: =DropShadow.Semilight
                              Fill: =ColorFade(cor.tema, 65%)
                              FillPortions: =0
                              Height: =55 + RoundDown(Len(TituloRespJuriGal.Text) / 30, 0) * 10
                              RadiusBottomLeft: =5
                              RadiusBottomRight: =5
                              RadiusTopLeft: =5
                              RadiusTopRight: =5
                              Width: =ContData.Width
                            Children:
                              - TituloData_1:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    Font: =Font.Lato
                                    FontColor: =If(!(Self.Text = "*Pendente Preenchimento*"), cor.fundoClaro, Color.Red)
                                    Height: =Parent.Height
                                    Size: =11
                                    Text: |-
                                      =If(
                                          !IsBlank(
                                              LookUp(
                                                  SAVe_DadosDeEntrada,
                                                  ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                                  Modified
                                              )
                                          ),
                                          Text(
                                              LookUp(
                                                  SAVe_DadosDeEntrada,
                                                  ThisRecord.ID_Caso = ThisItem.ID_Caso,
                                                  Modified
                                              )/*;
                                              "[$-pt-BR]dd/mm/yyyy"*/
                                          ),
                                          "*Pendente Preenchimento*"
                                      )
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =Parent.Width
                                    Wrap: =false
                  - peliculaGalCasos:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ='ButtonCanvas.Appearance'.Transparent
                        Height: =Parent.TemplateHeight //+ RoundDown(Len(TituloRespJuriGal.Text) / 30; 0) * 5
                        Layout: ='ButtonCanvas.Layout'.TextOnly
                        OnSelect: |-
                          =Set(_Carregando, true);
                          Set(ItemAtual, LookUp(SAVe_Geral, ID_Caso = ThisItem.ID_Caso));
                          Set(_FormCompleto, Boolean(ItemAtual.Tipo_Form));
                          Clear(_paginasVisitadas);
                          ForAll(ParseJSON(ItemAtual.Paginas_Visitadas), 
                              Collect(_paginasVisitadas, {Value: Text(ThisRecord.Value)})
                          );
                          Set(_Carregando, false);

                          // Navega para a primeira tela "Dados de Entrada"
                          Navigate(Tela_Dados_Entrada)
                        Text: =
                        Width: =Parent.TemplateWidth
      - Carregamento_1:
          Control: CanvasComponent
          ComponentName: Carregamento
          Properties:
            Fill: =RGBA(255, 255, 255, 0.09)
            Height: =App.Height
            Texto_Carregamento: ="Carregando..."
            Visible: =_Carregando
            Width: =App.Width
            cor_tema: =cor.tema
      - Image7:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Image: =
            X: =100
            Y: =80
      - MenuBuscar_1:
          Control: CanvasComponent
          ComponentName: MenuBuscar
          Properties:
            Height: =If(_expandirBuscar, 100, 60)
            Width: =If(_expandirBuscar, 400, 60)
            X: =If(_expandirBuscar, 961, 1296)
            Y: =If(_expandirBuscar, 660, 680)
