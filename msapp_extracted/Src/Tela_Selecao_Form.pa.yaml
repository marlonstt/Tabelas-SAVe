# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Tela_Selecao_Form:
    Properties:
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: =Refresh(SAVe_Geral);
    Children:
      - ContainerFundoSelecao:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Fill: =ColorFade(cor.tema, 70%)
            Height: =Parent.Height
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutDirection: =LayoutDirection.Vertical
            LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
            PaddingBottom: =200
            PaddingTop: =200
            Width: =Parent.Width
          Children:
            - TituloSelecaoForm:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.Center
                  AlignInContainer: =AlignInContainer.Stretch
                  Font: =Font.'Lato Black'
                  Height: =55
                  Size: =30
                  Text: ="Selecione o tipo de versão desejada:"
                  VerticalAlign: =VerticalAlign.Middle
            - BotaoFormSimples:
                Control: Button@0.0.45
                Properties:
                  BasePaletteColor: =cor.tema
                  BorderRadius: =10
                  DisplayMode: |-
                    =//DisplayMode.Edit
                    If(
                        varBloqueioNewCase,
                        DisplayMode.Disabled,
                        DisplayMode.Edit
                    )
                  Font: =Font.'Lato Black'
                  FontSize: =24
                  Height: =55
                  OnSelect: |+
                    =UpdateContext({varBloqueioNewCase: true});

                    Set(_FormCompleto, false);
                    Clear(_paginasVisitadas);
                    //Novo
                    Refresh(SAVe_Geral);
                    Set(
                        ItemAtual,
                        Patch(
                            SAVe_Geral,
                            Defaults(SAVe_Geral),
                            {
                                //ID_Caso: CountA(SAVe_Geral.ID_Caso) + 1;
                                //ID_Caso:Last(Sort(ShowColumns(SAVe_Geral; ID_Caso); SortOrder.Descending)).ID_Caso + 1;
                                ID_Caso: Max(ShowColumns(SAVe_Geral, ID_Caso), ID_Caso) + 1,
                                Tipo_Form: _FormCompleto, //criei uma coluna na SAVe_Geral
                                Encerrado: false
                            }
                        )
                    );

                    UpdateContext({varBloqueioNewCase: false});

                    Navigate(Tela_Dados_Entrada);

                  Text: ="Versão Breve"
                  Width: =280
            - BotaoFormCompleto:
                Control: Button@0.0.45
                Properties:
                  BasePaletteColor: =cor.tema
                  BorderRadius: =10
                  DisplayMode: |-
                    =//DisplayMode.Edit
                    If(
                        varBloqueioNewCase,
                        DisplayMode.Disabled,
                        DisplayMode.Edit
                    )
                  Font: =Font.'Lato Black'
                  FontSize: =24
                  Height: =55
                  OnSelect: |+
                    =UpdateContext({varBloqueioNewCase: true});

                    Set(
                        _FormCompleto,
                        true
                    );
                    Clear(_paginasVisitadas);
                    Refresh(SAVe_Geral);
                    Set(
                        ItemAtual,
                        Patch(
                            SAVe_Geral,
                            Defaults(SAVe_Geral),
                            {
                                //ID_Caso: CountA(SAVe_Geral.ID_Caso) + 1;
                                //ID_Caso:Last(Sort(ShowColumns(SAVe_Geral; ID_Caso); SortOrder.Descending)).ID_Caso + 1;
                                ID_Caso: Max(ShowColumns(SAVe_Geral, ID_Caso), ID_Caso) + 1,
                                Tipo_Form: _FormCompleto, //criei uma coluna na SAVe_Geral
                                Encerrado: false
                            }
                        )
                    );

                    UpdateContext({varBloqueioNewCase: false});

                    Navigate(Tela_Dados_Entrada)

                  Text: ="Versão Completa"
                  Width: =280
            - BotaoCancelarNovoCaso:
                Control: Button@0.0.45
                Properties:
                  BasePaletteColor: =cor.tema
                  BorderRadius: =10
                  Font: =Font.'Lato Black'
                  FontSize: =24
                  Height: =55
                  OnSelect: |-
                    =Navigate(Tela_Entrada);
                    Refresh(SAVe_Geral)
                  Text: ="Cancelar"
                  Width: =280
      - Image3:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =138
            Image: ='Logo-SavE'
            ImagePosition: =ImagePosition.Fill
            Width: =694
            X: =336
            Y: =20
      - Image4:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =45
            Image: ='logo-mp'
            ImagePosition: =ImagePosition.Fill
            Width: =310
            X: =528
            Y: =709
      - Image6:
          Control: Image@2.2.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Height: =55
            Image: ='logo-01'
            ImagePosition: =ImagePosition.Fill
            Width: =302
            X: =532
            Y: =630
