# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
ComponentDefinitions:
  ControleAnexos:
    DefinitionType: CanvasComponent
    AccessAppScope: true
    CustomProperties:
      EntrataItemAtual:
        PropertyKind: Input
        DisplayName: EntrataItemAtual
        Description: Uma propriedade personalizada
        DataType: Record
        Default: =ItemAtual
      NavegarAnexos:
        PropertyKind: Event
        DisplayName: NavegarAnexos
        Description: Uma propriedade personalizada
        ReturnType: None
        Default: |-
          =Set(_telaAnexo, App.ActiveScreen);
          Navigate(Tela_Anexos);
      telaAnexo:
        PropertyKind: Input
        DisplayName: telaAnexo
        Description: Uma propriedade personalizada
        DataType: Screen
        Default: =App.ActiveScreen
    Properties:
      Height: =250
      Width: =800
    Children:
      - ContainerAnexosDE:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            BorderColor: =RGBA(217, 217, 217, 1)
            BorderThickness: =2
            DropShadow: =DropShadow.Regular
            Height: =Parent.Height - 20
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Width: =Parent.Width - 20
            X: =10
            Y: =10
          Children:
            - AcessarAnexosDE:
                Control: Button@0.0.45
                Properties:
                  BasePaletteColor: =cor.tema
                  BorderRadius: =10
                  OnSelect: =ControleAnexos.NavegarAnexos()
                  Text: ="Acessar Anexos"
                  Width: =200
                  X: =Parent.Width/2 - Self.Width/2
                  Y: =GalAnexosControle.Height + GalAnexosControle.Y + 10
            - GalAnexosControle:
                Control: Gallery@2.15.0
                Variant: BrowseLayout_Horizontal_TwoTextOneImageVariant_ver5.0
                Properties:
                  BorderColor: =RGBA(0, 18, 107, 1)
                  DisplayMode: =DisplayMode.View
                  Height: =Parent.Height/2.5
                  Items: |-
                    =Filter(
                        ControleAnexos.EntrataItemAtual.Anexos,
                        LookUp(
                            Filter(
                                ForAll(
                                    ParseJSON(ControleAnexos.EntrataItemAtual.Anexos_Info),
                                    {
                                        DataUser: DateTimeValue(ThisRecord.DataUser),
                                        EmailUser: Text(ThisRecord.EmailUser),
                                        NomeArquivoUser: Text(ThisRecord.NomeArquivoUser),
                                        Tela: Text(ThisRecord.Tela)
                                    }
                                ),
                                Tela = ControleAnexos.telaAnexo.Name
                            ),
                            NomeArquivoUser = DisplayName
                        ).NomeArquivoUser = DisplayName
                    )
                  TemplateSize: =300
                  Width: =Parent.Width
                  Y: =50
                Children:
                  - NomeAnexo:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        BorderColor: =RGBA(0, 0, 0, 1)
                        Color: =RGBA(50, 49, 48, 1)
                        Font: =Font.Lato
                        FontWeight: =FontWeight.Semibold
                        Height: =Parent.TemplateHeight
                        OnSelect: =Select(Parent)
                        PaddingBottom: =0
                        PaddingLeft: =0
                        PaddingRight: =0
                        PaddingTop: =0
                        Size: =12
                        Text: =ThisItem.DisplayName
                        Width: =Parent.TemplateWidth
            - AvisoSemAnexo:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.Center
                  Font: =Font.Lato
                  Height: =GalAnexosControle.Height
                  Size: =20
                  Text: ="Sem Anexos nessa Tela"
                  VerticalAlign: =VerticalAlign.Middle
                  Visible: =IsEmpty(GalAnexosControle.AllItems)
                  Weight: ='TextCanvas.Weight'.Bold
                  Width: =Parent.Width
                  Y: =33
            - TituloAnexos:
                Control: Text@0.0.51
                Properties:
                  Align: ='TextCanvas.Align'.Center
                  Font: =Font.Lato
                  Height: =50
                  Size: =20
                  Text: ="Anexos:"
                  VerticalAlign: =VerticalAlign.Middle
                  Weight: ='TextCanvas.Weight'.Bold
                  Width: =Parent.Width
