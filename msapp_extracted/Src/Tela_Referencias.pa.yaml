# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Tela_Referencias:
    Properties:
      Fill: =RGBA(245, 246, 248, 1)
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |-
        =If(!IsBlankOrError(ItemAtual.ID_Caso),
            ClearCollect(
                _colDocumentacao,
                {
                    descricao: "Guia Metodológico PAV",
                    url: "https://www.mpmg.mp.br/data/files/33/75/B0/3E/C178391041383A19760849A8/Guia%20Metodologico%20Casa%20Lilian.pdf"
                },
                {
                    descricao: "Protocolo PAV",
                    url: ""
                },
                {
                    descricao: "Resolução 243/2021 do CNMP",
                    url: ""
                },
                {
                    descricao: "Domestic Abuse; Stalking and Harassment and Honour Based Violence (DASH 2009-2024) Risk Identification and Assessment and Management Model",
                    url: "https://static1.squarespace.com/static/63585aa01220164be2e387b2/t/65a82ce5e47f867b140872ed/1705520358604/DASH+2009+2024.pdf"
                },
                {
                    descricao: "MANUAL DE SEGURANÇA: MEDIDAS PRÁTICAS PARA DEFENSORES DOS DIREITOS HUMANOS EM RISCO",
                    url: "https://www.frontlinedefenders.org/sites/default/files/workbook_portuguese_0_copy.pdf"
                },
                {
                    descricao: "FRIDA",
                    url: "https://www.gov.br/mdh/pt-br/centrais-de-conteudo/ligue-180/FormulrioFRIDA.pdf/view"
                },
                {
                    descricao: "Rogéria",
                    url: "https://www.cnj.jus.br/wp-content/uploads/2024/10/formulario-rogeria-18-10-24.pdf"
                },
                {
                    descricao: "Avaliação e Gestão de Risco em Rede Manual para profissionais",
                    url: "https://www.pgdlisboa.pt/docpgd/files/1436798180_gestao_risco_emar.pdf"
                },
                {
                    descricao: "Insegurança Alimentar e Nutricional",
                    url: "https://www.gov.br/saude/pt-br/assuntos/saude-brasil/glossario/inseguranca-alimentar-e-nutricional"
                },
                {
                    descricao: "ROTEIRO PARA UTILIZAÇÃO DA ESCALA DE VULNERABILIDADE FAMILIAR (EVFAM-BR)",
                    url: "https://www.planificasus.com.br/arquivo-download.php?hash=48c3191b70c9ff22b8b336331fa417eaf87d366d&t=1692220483&type=biblioteca&utm_source=chatgpt.com"
                },
                {
                    descricao: "Modelo para Avaliação dos Riscos Psicossociais e de Violência - NOTA TÉCNICA Nº 67/2021-CGMAD/DAPES/SAPS/MS",
                    url: "https://egestorab.saude.gov.br/image/?file=20211216_N_InstrumentoparaAvaliacaodoRiscosPsicossociaisedeViolencia-pacientesforenses-inclusaoemSRT_7107186306922612782.pdf&utm_source=chatgpt.com"
                },
                {
                    descricao: "Cartilha CNJ",
                    url: "https://www.cnj.jus.br/wp-content/uploads/2023/12/cartilha-vitimas-de-crimes-digital.pdf"
                }
            );
            If(
                !(App.ActiveScreen.Name in _paginasVisitadas),
                Collect(
                    _paginasVisitadas,
                    App.ActiveScreen.Name
                );
                Patch(
                    SAVe_Geral,
                    {ID: ItemAtual.ID_Caso},
                    {Paginas_Visitadas: JSON(_paginasVisitadas)}
                )
            )
        )
    Children:
      - Container1_30:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.None
            Fill: =RGBA(255, 255, 255, 1)
            Height: =Parent.Height-Self.Y-10
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Width: =1346
            X: =10
            Y: =80
          Children:
            - MenuPassos_16:
                Control: CanvasComponent
                ComponentName: MenuPassos
                Properties:
                  GaleriaAbas: "=With(\r\n    {\r\n        menu: If(_FormCompleto, \r\n        [\r\n            {\r\n                idMenu: 1,\r\n                largura: 120,\r\n                nome: \"Dados de Entrada\",\r\n                descricao: \"\",\r\n                pagina: Tela_Dados_Entrada\r\n            },\r\n            {\r\n                idMenu: 2,\r\n                largura: 120,//150\r\n                nome: \"Sócio identificação\",\r\n                descricao: \"\",\r\n                pagina: Tela_Socio_Identificacao\r\n            },\r\n            {\r\n                idMenu: 3,\r\n                largura: 120,//180\r\n                nome: \"Ensino - trab - renda\",\r\n                descricao: \"\",\r\n                pagina: Tela_Ensino_Trab_Renda\r\n            },\r\n            \r\n            {\r\n                idMenu: 4,\r\n                largura: 60,\r\n                nome: \"Assistência\",\r\n                descricao: \"\",\r\n                pagina: Tela_Assistencia\r\n            },\r\n            {\r\n                idMenu: 5,\r\n                largura: 90,\r\n                nome: \"Território\",\r\n                descricao: \"\",\r\n                pagina: Tela_Territorio\r\n            },\r\n            {\r\n                idMenu: 6,\r\n                largura: 80,\r\n                nome: \"Saúde\",\r\n                descricao: \"\",\r\n                pagina: Tela_Saude\r\n            },\r\n            {\r\n                idMenu: 7,\r\n                largura: 85,\r\n                nome: \"Vínculos\",\r\n                descricao: \"\",\r\n                pagina: Tela_Vinculos\r\n            },\r\n            {\r\n                idMenu: 8,\r\n                largura: 120,//200\r\n                nome: \"Situação Jurídica\",\r\n                descricao: \"\",\r\n                pagina: Tela_SitJuridica\r\n            },\r\n            {\r\n                idMenu: 9,\r\n                largura: 110,\r\n                nome: \"Agressor\",\r\n                descricao: \"\",\r\n                pagina: Tela_Agressor\r\n            },\r\n            {\r\n                idMenu: 10,\r\n                largura: 120,//180\r\n                nome: \"Proteção-segurança\",\r\n                descricao: \"\",\r\n                pagina: Tela_Protecao_Seguranca\r\n            },\r\n            {\r\n                idMenu: 11,\r\n                largura: 120,\r\n                nome: \"Vitimização secundária e terciária\",\r\n                descricao: \"\",\r\n                pagina: Tela_Vitimizacao\r\n            },\r\n            {\r\n                idMenu: 12,\r\n                largura: 120,\r\n                nome: \"Síntese Analítica\",\r\n                descricao: \"\",\r\n                pagina: Tela_Sintese_Analitica\r\n            },\r\n            {\r\n                idMenu: 13,\r\n                largura: 120,//170\r\n                nome: \"Acompanhamentos\",\r\n                descricao: \"\",\r\n                pagina: Tela_Acompanhamento\r\n            },\r\n            /*{\r\n                idMenu: 14;\r\n                largura: 120;//200\r\n                nome: \"Relato de Atendimento\";\r\n                descricao: \"\";\r\n                pagina: Tela_Relato_De_Atendimento\r\n            };*/\r\n            {\r\n                idMenu: 14,\r\n                largura: 120,//135\r\n                nome: \"Encerramento\",\r\n                descricao: \"\",\r\n                pagina: Tela_Encerramento\r\n            },\r\n            /*{\r\n                idMenu: 15;\r\n                largura: 120;//132\r\n                nome: \"Matriz de risco\";\r\n                descricao: \"\";\r\n                pagina: Tela_Matriz_De_Risco\r\n            };*/\r\n            {\r\n                idMenu: 15,\r\n                largura: 120,//135\r\n                nome: \"Referências\",\r\n                descricao: \"\",\r\n                pagina: Tela_Referencias\r\n            }\r\n        ], //dados de entrada, socioidentificação, situação juridica maior e menor, proteção-segurança e vitimização \r\n        [\r\n            {\r\n                idMenu: 1,\r\n                largura: 170,\r\n                nome: \"Dados de Entrada\",\r\n                descricao: \"\",\r\n                pagina: Tela_Dados_Entrada\r\n            },\r\n            {\r\n                idMenu: 2,\r\n                largura: 150,\r\n                nome: \"Sócio identificação\",\r\n                descricao: \"\",\r\n                pagina: Tela_Socio_Identificacao\r\n            },\r\n            {\r\n                idMenu: 3,\r\n                largura: 200,\r\n                nome: \"Situação Jurídica\",\r\n                descricao: \"\",\r\n                pagina: Tela_SitJuridica\r\n            },\r\n            {\r\n                idMenu: 4,\r\n                largura: 180,\r\n                nome: \"Proteção-segurança\",\r\n                descricao: \"\",\r\n                pagina: Tela_Protecao_Seguranca\r\n            },\r\n            {\r\n                idMenu: 5,\r\n                largura: 240,\r\n                nome: \"Vitimização secundária e terciária\",\r\n                descricao: \"\",\r\n                pagina: Tela_Vitimizacao\r\n            }\r\n        ]\r\n        )\r\n    },\r\n    With(\r\n        {\r\n            // Acrescenta a coluna \"larguraCalc\" conforme regra:\r\n            // Se o item for o selecionado (_passoAtual.idMenu), usa a largura definida;\r\n// Senão, divide o espaço restante igualmente entre os demais itens.\r\nmenuCalc: AddColumns(\r\n                menu,\r\n                larguraCalc,\r\n                If(\r\n                    pagina = MenuPassos_16.TelaAtual,\r\n                    largura,\r\n                    If(pagina = Tela_Vitimizacao, largura,\r\n                    ((Self.Width - 100) - LookUp(\r\n                        menu,\r\n                        pagina = MenuPassos_16.TelaAtual,\r\n                        largura\r\n                    )) / (CountRows(menu) - 1))\r\n                )\r\n            )\r\n        },\r\n        // Ordena os itens pelo idMenu e calcula a posição \"distancia\" de cada item\r\n// somando as larguras calculadas dos itens anteriores.\r\n        AddColumns(\r\n            SortByColumns(\r\n                menuCalc,\r\n                \"idMenu\",\r\n                SortOrder.Ascending\r\n            ) As m1,\r\n            distancia,\r\n            Sum(\r\n                Filter(\r\n                    menuCalc,\r\n                    idMenu < m1.idMenu\r\n                ),\r\n                larguraCalc\r\n            )\r\n        )\r\n    )\r\n)"
                  Height: =100
                  TelaAtual: =App.ActiveScreen
                  Width: =App.Width
            - Canvas2_17:
                Control: FluidGrid@2.3.0
                Properties:
                  BorderThickness: =0
                  Height: =583
                  Width: =Parent.Width
                  Y: =95
                Children:
                  - DataCard16_6:
                      Control: DataCard@1.0.2
                      Variant: BlankCard
                      Properties:
                        Height: |+
                          =Container2_61.Height+15

                        Width: =1346
                        X: =0
                        Y: =0
                      Children:
                        - Container2_61:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              BorderColor: =RGBA(217, 217, 217, 1)
                              BorderThickness: =2
                              DropShadow: =DropShadow.Regular
                              Height: |+
                                =(Container11.Height + Container11.Y) + 20
                              RadiusBottomLeft: =8
                              RadiusBottomRight: =8
                              RadiusTopLeft: =8
                              RadiusTopRight: =8
                              Width: =1321
                              X: =5
                              Y: =10
                            Children:
                              - Label2_586:
                                  Control: Label@2.5.1
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Color: =cor.textoSecundaria
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Height: =27
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingTop: =0
                                    Size: =11
                                    Text: ="DOCUMENTAÇÃO"
                                    Width: =350
                                    X: =12
                                    Y: =3
                              - Container11:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    DropShadow: =DropShadow.Regular
                                    Height: =Gallery2.Height
                                    RadiusBottomLeft: =10
                                    RadiusBottomRight: =10
                                    RadiusTopLeft: =10
                                    RadiusTopRight: =10
                                    Width: =1260
                                    X: =31
                                    Y: =40
                                  Children:
                                    - Gallery2:
                                        Control: Gallery@2.15.0
                                        Variant: BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0
                                        Properties:
                                          BorderColor: =RGBA(0, 18, 107, 1)
                                          Height: =1250
                                          Items: |-
                                            =With(
                                                {
                                                    records: _colDocumentacao
                                                },
                                                ForAll(
                                                    Sequence(CountRows(records)),
                                                    Patch(
                                                        Last(
                                                            FirstN(
                                                                records,
                                                                Value
                                                            )
                                                        ),
                                                        {rowNumber2: Value}
                                                    )
                                                )
                                            )
                                          Width: =1260
                                        Children:
                                          - Rectangle2_1:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                BorderColor: =RGBA(0, 18, 107, 1)
                                                Fill: |-
                                                  =//If(Mod(ThisItem.RowNumber; 2) = 0;RGBA(220;220;220;1); RGBA(202;208;202;1))
                                                  //If(Mod(ThisItem.RowNumber; 2) = 0;RGBA(240;255;255;0,40); RGBA(224;238;238;0,10))
                                                  If(Mod(ThisItem.rowNumber2, 2) = 0,RGBA(232,232,232,0.50), RGBA(232,232,250,0.30))
                                                Height: =104
                                                OnSelect: =
                                                Width: =1260
                                          - HtmlText1_1:
                                              Control: HtmlViewer@2.1.0
                                              Properties:
                                                Color: =RGBA(106, 122, 127, 1)
                                                Font: =Font.'Open Sans'
                                                Height: =35
                                                HtmlText: |+
                                                  ="Clique aqui para acessar"
                                                OnSelect: =Select(Parent)
                                                Width: =215
                                                X: =31
                                                Y: =55
                                          - Label1_1:
                                              Control: Label@2.5.1
                                              Properties:
                                                BorderColor: =RGBA(0, 18, 107, 1)
                                                Font: =Font.'Open Sans'
                                                OnSelect: =Select(Parent)
                                                Text: =ThisItem.descricao
                                                Width: =1260
                                                Y: =20
                                          - Image2_1:
                                              Control: Image@2.2.3
                                              Properties:
                                                BorderColor: =RGBA(0, 18, 107, 1)
                                                Height: =30
                                                Image: =networking
                                                OnSelect: =
                                                Width: =30
                                                X: =4
                                                Y: =58
                                          - Button6_1:
                                              Control: Classic/Button@2.2.0
                                              Properties:
                                                BorderColor: =
                                                BorderStyle: =BorderStyle.None
                                                BorderThickness: =0
                                                Color: =RGBA(255, 255, 255, 1)
                                                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                                                Fill: =RGBA(0, 0, 0, 0)
                                                Font: =Font.'Open Sans'
                                                Height: =33
                                                HoverBorderColor: =
                                                HoverColor: =RGBA(255, 255, 255, 1)
                                                HoverFill: =
                                                OnSelect: =Launch(ThisItem.url)
                                                PressedBorderColor: =
                                                PressedColor: =
                                                PressedFill: =
                                                Text: =
                                                Tooltip: =ThisItem.url
                                                Width: =242
                                                X: =4
                                                Y: =55
                  - DataCard27_3:
                      Control: DataCard@1.0.2
                      Variant: BlankCard
                      Properties:
                        Height: =84
                        Width: =1346
                        X: =0
                        Y: =1
                      Children:
                        - botaoSalvarPasso1_33:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              BorderThickness: =0
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              Fill: =cor.tema
                              Font: =Font.'Open Sans'
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: =Back()
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              RadiusBottomLeft: =6
                              RadiusBottomRight: =6
                              RadiusTopLeft: =6
                              RadiusTopRight: =6
                              Size: =13
                              Text: ="Voltar"
                              Width: =194
                              X: =32
                              Y: =16
      - MenuSuperior_18:
          Control: CanvasComponent
          ComponentName: MenuSuperior
          Properties:
            Height: =60
            Width: =1346
            X: =10
            Y: =10
