# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  Tela_Sintese_Analitica:
    Properties:
      Fill: =RGBA(245, 246, 248, 1)
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |-
        =If(!IsBlankOrError(ItemAtual.ID_Caso),
            Concurrent(
                // Sessão Vítima de especial vulnerabilidade
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Vítima de especial vulnerabilidade"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Vítima de especial vulnerabilidade",
                        AvaliacaoDeRiscos: If(
                            LookUp(
                                SAVe_Identificacao,
                                ID_Caso = ItemAtual.ID_Caso,
                                PPS_Sexo
                            ) = "Masculino" && Value(entradaIdade.Value) > 18 && Value(entradaIdade.Value) < 60 && LookUp(
                                SAVe_Identificacao,
                                ID_Caso = ItemAtual.ID_Caso,
                                PPS_idgenero
                            ) = "Homem cisgênero" && LookUp(
                                SAVe_Identificacao,
                                ID_Caso = ItemAtual.ID_Caso,
                                PPS_orientacao_sexual
                            ) = "Heterossexual",
                            "Não pertence a grupos vulneráveis.",
                            If(
                                LookUp(
                                    SAVe_Vinculos,
                                    ID_Caso = ItemAtual.ID_Caso,
                                    Alt_Fam_Com_Vitim
                                ) = "Sim" || LookUp(
                                    SAVe_Vinculos,
                                    ID_Caso = ItemAtual.ID_Caso,
                                    Vulnerab_Vinculos_Fam
                                ) = "Sim",
                                "Pertence a grupos vulneráveis sem apoio.",
                                "Pertence a grupos vulneráveis, mas com apoio."
                            )
                        ),
                        Cor: If(
                            LookUp(
                                SAVe_Identificacao,
                                ID_Caso = ItemAtual.ID_Caso,
                                PPS_Sexo
                            ) = "Masculino" && Value(entradaIdade.Value) > 18 && Value(entradaIdade.Value) < 60 && LookUp(
                                SAVe_Identificacao,
                                ID_Caso = ItemAtual.ID_Caso,
                                PPS_idgenero
                            ) = "Homem cisgênero" && LookUp(
                                SAVe_Identificacao,
                                ID_Caso = ItemAtual.ID_Caso,
                                PPS_orientacao_sexual
                            ) = "Heterossexual",
                            "Verde",
                            If(
                                LookUp(
                                    SAVe_Vinculos,
                                    ID_Caso = ItemAtual.ID_Caso,
                                    Alt_Fam_Com_Vitim
                                ) = "Sim" || LookUp(
                                    SAVe_Vinculos,
                                    ID_Caso = ItemAtual.ID_Caso,
                                    Vulnerab_Vinculos_Fam
                                ) = "Sim",
                                "Vermelho",
                                "Aviso"
                            )
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Vítima de especial vulnerabilidade"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Vítima de especial vulnerabilidade"
                            ).DataVencimento
                        )
                    }
                ),
                // Sessão Grupo familiar e vínculos sociais
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Grupo familiar e vínculos sociais"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Grupo familiar e vínculos sociais",
                        AvaliacaoDeRiscos: If(
                            GFVS_01.Checked,
                            "Rede de apoio funcional.",
                            GFVS_02.Checked,
                            "Rede de apoio frágil e instável.",
                            GFVS_03.Checked,
                            "Isolamento social, rompimento familiar."
                        ),
                        Cor: If(
                            GFVS_01.Checked,
                            "Verde",
                            GFVS_02.Checked,
                            "Aviso",
                            GFVS_03.Checked,
                            "Vermelho"
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Grupo familiar e vínculos sociais"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Grupo familiar e vínculos sociais"
                            ).DataVencimento
                        )
                    }
                ),
                // Sessão Escolaridade/qualificação
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Escolaridade/qualificação"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Escolaridade/qualificação",
                        AvaliacaoDeRiscos: If(
                            EQ_01.Checked,
                            "Ensino médio completo ou superior.",
                            EQ_02.Checked,
                            "Ensino fundamental completo ou médio incompleto.",
                            EQ_03.Checked,
                            "Analfabetismo ou nenhuma qualificação."
                        ),
                        Cor: If(
                            EQ_01.Checked,
                            "Verde",
                            EQ_02.Checked,
                            "Aviso",
                            EQ_03.Checked,
                            "Vermelho"
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Escolaridade/qualificação"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Escolaridade/qualificação"
                            ).DataVencimento
                        )
                    }
                ),
                // Sessão Situação laboral e econômica
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Situação laboral e econômica"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Situação laboral e econômica",
                        AvaliacaoDeRiscos: If(
                            SLE_01.Checked,
                            "Emprego formal estável.",
                            SLE_02.Checked,
                            "Trabalho informal ou desemprego eventual.",
                            SLE_03.Checked,
                            "Desemprego crônico, renda insuficiente."
                        ),
                        Cor: If(
                            SLE_01.Checked,
                            "Verde",
                            SLE_02.Checked,
                            "Aviso",
                            SLE_03.Checked,
                            "Vermelho"
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Situação laboral e econômica"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Situação laboral e econômica"
                            ).DataVencimento
                        )
                    }
                ),
                // Sessão Situação habitacional e território
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Situação habitacional e território"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Situação habitacional e território",
                        AvaliacaoDeRiscos: If(
                            SHT_01.Checked,
                            "Moradia segura em local adequado.",
                            SHT_02.Checked,
                            "Moradia precária em área urbana de risco.",
                            SHT_03.Checked,
                            "Sem moradia fixa ou em área de risco grave."
                        ),
                        Cor: If(
                            SHT_01.Checked,
                            "Verde",
                            SHT_02.Checked,
                            "Aviso",
                            SHT_03.Checked,
                            "Vermelho"
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Situação habitacional e território"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Situação habitacional e território"
                            ).DataVencimento
                        )
                    }
                ),
                // Sessão Situação de saúde
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Situação de saúde"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Situação de saúde",
                        AvaliacaoDeRiscos: If(
                            SS_01.Checked,
                            "Saúde estável, acesso regular a cuidados.",
                            SS_02.Checked,
                            "Doenças crônicas controladas.",
                            SS_03.Checked,
                            "Doenças graves sem acompanhamento."
                        ),
                        Cor: If(
                            SS_01.Checked,
                            "Verde",
                            SS_02.Checked,
                            "Aviso",
                            SS_03.Checked,
                            "Vermelho"
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Situação de saúde"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Situação de saúde"
                            ).DataVencimento
                        )
                    }
                ),
                // Sessão Demandas jurídicas
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Demandas jurídicas"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Demandas jurídicas",
                        AvaliacaoDeRiscos: If(
                            DJ_01.Checked,
                            "Sem pendências jurídicas.",
                            DJ_02.Checked,
                            "Questões jurídicas em andamento.",
                            DJ_03.Checked,
                            "Sem documentação ou litígios complexos."
                        ),
                        Cor: If(
                            DJ_01.Checked,
                            "Verde",
                            DJ_02.Checked,
                            "Aviso",
                            DJ_03.Checked,
                            "Vermelho"
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Demandas jurídicas"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Demandas jurídicas"
                            ).DataVencimento
                        )
                    }
                ),
                // Sessão Proteção e Segurança
                Patch(
                    SAVe_Sintese_Analitica,
                    Coalesce(
                        LookUp(
                            SAVe_Sintese_Analitica,
                            ID_Caso = ItemAtual.ID_Caso && UnidadeAnalitica = "Proteção e segurança"
                        ),
                        Defaults(SAVe_Sintese_Analitica)
                    ),
                    {
                        ID_Caso: ItemAtual.ID_Caso,
                        UnidadeAnalitica: "Proteção e segurança",
                        AvaliacaoDeRiscos: If(
                            PS_01.Checked,
                            "Não há ameaças diretas.",
                            PS_02.Checked,
                            "Ameaças ocasionais.",
                            PS_03.Checked,
                            "Ameaça iminente à integridade física."
                        ),
                        Cor: If(
                            PS_01.Checked,
                            "Verde",
                            PS_02.Checked,
                            "Aviso",
                            PS_03.Checked,
                            "Vermelho"
                        ),
                        PlanoDePrevencao: Text(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Proteção e segurança"
                            ).PlanoPrevencao
                        ),
                        DataVencimento: DateValue(
                            LookUp(
                                SAVe_Sintese_Analitica,
                                ID_Caso = ItemAtual.ID_Caso && ThisRecord.UnidadeAnalitica = "Proteção e segurança"
                            ).DataVencimento
                        )
                    }
                )
            );
            If(
                !(App.ActiveScreen.Name in _paginasVisitadas),
                Collect(
                    _paginasVisitadas,
                    App.ActiveScreen.Name
                );
                Patch(
                    SAVe_Geral,
                    {ID: ItemAtual.ID_Caso},
                    {Paginas_Visitadas: JSON(_paginasVisitadas)}
                )
            )
        )
    Children:
      - Container1_27:
          Control: GroupContainer@1.3.0
          Variant: ManualLayout
          Properties:
            DropShadow: =DropShadow.None
            Fill: =RGBA(255, 255, 255, 1)
            Height: =Parent.Height-Self.Y-10
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Width: =1346
            X: =10
            Y: =80
          Children:
            - Canvas2_14:
                Control: FluidGrid@2.3.0
                Properties:
                  BorderThickness: =0
                  Height: =583
                  Width: =Parent.Width
                  Y: =95
                Children:
                  - DataCard1_3:
                      Control: DataCard@1.0.2
                      Variant: BlankCard
                      Properties:
                        Height: =60
                        Width: =1346
                        X: =0
                        Y: =3
                      Children:
                        - botaoSalvarPasso1_35:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              BorderThickness: =0
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              Fill: =cor.tema
                              Font: =Font.'Open Sans'
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: =MenuPassos_20.NavegarAnterior()
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              RadiusBottomLeft: =6
                              RadiusBottomRight: =6
                              RadiusTopLeft: =6
                              RadiusTopRight: =6
                              Size: =13
                              Text: ="Voltar"
                              Width: =194
                              X: =12
                              Y: =16
                        - botaoSalvarPasso1_36:
                            Control: Classic/Button@2.2.0
                            Properties:
                              BorderColor: =ColorFade(Self.Fill, -15%)
                              BorderThickness: =0
                              Color: =RGBA(255, 255, 255, 1)
                              DisabledBorderColor: =RGBA(166, 166, 166, 1)
                              DisplayMode: =If(ItemAtual.Encerrado, DisplayMode.Disabled, DisplayMode.Edit)
                              Fill: =cor.tema
                              Font: =Font.'Open Sans'
                              HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
                              HoverColor: =RGBA(255, 255, 255, 1)
                              HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
                              OnSelect: =MenuPassos_11.NavegarProximo()
                              PressedBorderColor: =Self.Fill
                              PressedColor: =Self.Fill
                              PressedFill: =Self.Color
                              RadiusBottomLeft: =6
                              RadiusBottomRight: =6
                              RadiusTopLeft: =6
                              RadiusTopRight: =6
                              Size: =13
                              Text: ="Próximo"
                              Width: =194
                              X: =1128
                              Y: =botaoSalvarPasso1.Y
                  - DataCard16_3:
                      Control: DataCard@1.0.2
                      Variant: BlankCard
                      Properties:
                        DisplayMode: =If(ItemAtual.Encerrado, DisplayMode.View, DisplayMode.Edit)
                        Height: |+
                          =Container2_55.Height+10
                        Width: =1346
                        X: =0
                        Y: =0
                      Children:
                        - Container2_55:
                            Control: GroupContainer@1.3.0
                            Variant: ManualLayout
                            Properties:
                              BorderColor: =RGBA(217, 217, 217, 1)
                              DropShadow: =DropShadow.None
                              Height: =Container15.Height + 120
                              RadiusBottomLeft: =8
                              RadiusBottomRight: =8
                              RadiusTopLeft: =8
                              RadiusTopRight: =8
                              Width: =1315
                              X: =10
                              Y: =5
                            Children:
                              - Label2_561:
                                  Control: Label@2.5.1
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Color: =cor.textoSecundaria
                                    Font: =Font.'Open Sans'
                                    FontWeight: =FontWeight.Semibold
                                    Height: =27
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingTop: =0
                                    Size: =11
                                    Text: ="Síntese Analítica"
                                    Width: =500
                                    X: =24
                                    Y: =13
                              - TextCanvas2_8:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    BorderRadiusTopLeft: =50
                                    BorderRadiusTopRight: =50
                                    Fill: =ColorFade(cor.tema,83%)
                                    Font: =Font.Lato
                                    FontColor: =cor.tema
                                    Height: =51
                                    Size: =18
                                    Text: ="Unidade Analítica"
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =300
                                    X: =35
                                    Y: =52
                              - TextCanvas2_9:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    BorderRadiusTopLeft: =50
                                    BorderRadiusTopRight: =50
                                    Fill: =ColorFade(cor.tema,83%)
                                    Font: =Font.Lato
                                    FontColor: =cor.tema
                                    Height: =50
                                    Size: =18
                                    Text: ="Avaliação de riscos e vulnerabilidades - ARV"
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =300
                                    X: =351
                                    Y: =52
                              - TextCanvas2_14:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    BorderRadiusTopLeft: =50
                                    BorderRadiusTopRight: =50
                                    Fill: =ColorFade(cor.tema,83%)
                                    Font: =Font.Lato
                                    FontColor: =cor.tema
                                    Height: =51
                                    Size: =18
                                    Text: |-
                                      ="Plano de prevenção 
                                      da vitimização - PPV"
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =300
                                    X: =667
                                    Y: =51
                              - TextCanvas2_16:
                                  Control: Text@0.0.51
                                  Properties:
                                    Align: ='TextCanvas.Align'.Center
                                    BorderRadiusTopLeft: =50
                                    BorderRadiusTopRight: =50
                                    Fill: =ColorFade(cor.tema,83%)
                                    Font: =Font.Lato
                                    FontColor: =cor.tema
                                    Height: =51
                                    Size: =18
                                    Text: ="Data de Vencimento"
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Width: =300
                                    X: =985
                                    Y: =51
                              - Container15:
                                  Control: GroupContainer@1.3.0
                                  Variant: ManualLayout
                                  Properties:
                                    DropShadow: =DropShadow.Regular
                                    Height: =Gallery5_5.Height
                                    RadiusBottomLeft: =10
                                    RadiusBottomRight: =10
                                    RadiusTopLeft: =10
                                    RadiusTopRight: =10
                                    Width: =1270
                                    X: =24
                                    Y: =103
                                  Children:
                                    - Gallery5_5:
                                        Control: Gallery@2.15.0
                                        Variant: BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0
                                        Properties:
                                          BorderColor: =RGBA(0, 18, 107, 1)
                                          Fill: =RGBA(245, 246, 247, 0.73)
                                          Height: =Self.AllItemsCount * 81
                                          Items: =Filter(SAVe_Sintese_Analitica, ID_Caso = ItemAtual.ID_Caso)
                                          TemplateSize: =81
                                          Width: =1270
                                        Children:
                                          - Separator3_2:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                BorderColor: =RGBA(0, 18, 107, 1)
                                                Fill: =RGBA(214, 221, 224, 1)
                                                Height: =2
                                                OnSelect: =Select(Parent)
                                                Width: =Parent.TemplateWidth
                                                Y: =79
                                          - TextCanvas2_17:
                                              Control: Text@0.0.51
                                              Properties:
                                                Align: ='TextCanvas.Align'.Center
                                                BorderColor: =RGBA(106, 122, 127, 1)
                                                BorderRadius: =10
                                                BorderStyle: =BorderStyle.Solid
                                                BorderThickness: =1
                                                Font: =Font.Lato
                                                FontColor: =RGBA(0, 0, 0, 1)
                                                Height: =57
                                                Size: =18
                                                Text: =ThisItem.UnidadeAnalitica
                                                VerticalAlign: =VerticalAlign.Middle
                                                Weight: ='TextCanvas.Weight'.Regular
                                                Width: =300
                                                X: =12
                                                Y: =9
                                          - TextCanvas2_18:
                                              Control: Text@0.0.51
                                              Properties:
                                                Align: ='TextCanvas.Align'.Center
                                                BorderColor: =RGBA(106, 122, 127, 1)
                                                BorderRadius: =10
                                                BorderStyle: =BorderStyle.None
                                                BorderThickness: =1
                                                Fill: |-
                                                  =Switch(
                                                      ThisItem.Cor,
                                                      "Verde",
                                                      cor.verde,
                                                      "Aviso",
                                                      cor.aviso,
                                                      "Vermelho",
                                                      cor.vermelho
                                                  )
                                                Font: =Font.Lato
                                                FontColor: =RGBA(0, 0, 0, 1)
                                                Height: =57
                                                Size: =18
                                                Text: =If(IsBlankOrError(ThisItem.AvaliacaoDeRiscos), "-", ThisItem.AvaliacaoDeRiscos)
                                                VerticalAlign: =VerticalAlign.Middle
                                                Weight: ='TextCanvas.Weight'.Regular
                                                Width: =300
                                                X: =329
                                                Y: =9
                                          - entradaPlanoPrevencao:
                                              Control: TextInput@0.0.54
                                              Properties:
                                                Align: =Align.Justify
                                                Appearance: ='TextInputCanvas.Appearance'.FilledLighter
                                                BorderColor: =RGBA(106, 122, 127, 1)
                                                BorderRadius: =10
                                                BorderStyle: =BorderStyle.Solid
                                                BorderThickness: =1
                                                Height: =57
                                                Mode: ='TextInputCanvas.Mode'.Multiline
                                                OnChange: |-
                                                  =Notify(
                                                      "Salvando...",
                                                      NotificationType.Information
                                                  );
                                                  Patch(
                                                      SAVe_Sintese_Analitica,
                                                      LookUp(
                                                          SAVe_Sintese_Analitica,
                                                          ID = ThisItem.ID
                                                      ),
                                                      {PlanoDePrevencao: Self.Value}
                                                  );
                                                  Notify(
                                                      "Salvo! ✅",
                                                      NotificationType.Success,
                                                      2000
                                                  )
                                                TriggerOutput: ='TextInputCanvas.TriggerOutput'.Delayed
                                                Value: =ThisItem.PlanoDePrevencao
                                                Visible: =!IsBlank(ThisItem.AvaliacaoDeRiscos)
                                                Width: =300
                                                X: =646
                                                Y: =9
                                          - entradaDataVencimento:
                                              Control: DatePicker@0.0.46
                                              Properties:
                                                BorderColor: =RGBA(106, 122, 127, 1)
                                                BorderRadius: =10
                                                BorderThickness: =1
                                                Height: =57
                                                OnChange: |-
                                                  =Notify(
                                                      "Salvando...",
                                                      NotificationType.Information
                                                  );
                                                  Patch(
                                                      SAVe_Sintese_Analitica,
                                                      LookUp(
                                                          SAVe_Sintese_Analitica,
                                                          ID = ThisItem.ID
                                                      ),
                                                      {DataVencimento: Self.SelectedDate}
                                                  );
                                                  Notify(
                                                      "Salvo! ✅",
                                                      NotificationType.Success,
                                                      2000
                                                  )
                                                SelectedDate: =ThisItem.DataVencimento
                                                Visible: =!IsBlank(ThisItem.AvaliacaoDeRiscos)
                                                Width: =300
                                                X: =965
                                                Y: =9
            - MenuPassos_20:
                Control: CanvasComponent
                ComponentName: MenuPassos
                Properties:
                  GaleriaAbas: "=With(\r\n    {\r\n        menu: If(_FormCompleto, \r\n        [\r\n            {\r\n                idMenu: 1,\r\n                largura: 120,\r\n                nome: \"Dados de Entrada\",\r\n                descricao: \"\",\r\n                pagina: Tela_Dados_Entrada\r\n            },\r\n            {\r\n                idMenu: 2,\r\n                largura: 120,//150\r\n                nome: \"Sócio identificação\",\r\n                descricao: \"\",\r\n                pagina: Tela_Socio_Identificacao\r\n            },\r\n            {\r\n                idMenu: 3,\r\n                largura: 120,//180\r\n                nome: \"Ensino - trab - renda\",\r\n                descricao: \"\",\r\n                pagina: Tela_Ensino_Trab_Renda\r\n            },\r\n            \r\n            {\r\n                idMenu: 4,\r\n                largura: 60,\r\n                nome: \"Assistência\",\r\n                descricao: \"\",\r\n                pagina: Tela_Assistencia\r\n            },\r\n            {\r\n                idMenu: 5,\r\n                largura: 90,\r\n                nome: \"Território\",\r\n                descricao: \"\",\r\n                pagina: Tela_Territorio\r\n            },\r\n            {\r\n                idMenu: 6,\r\n                largura: 80,\r\n                nome: \"Saúde\",\r\n                descricao: \"\",\r\n                pagina: Tela_Saude\r\n            },\r\n            {\r\n                idMenu: 7,\r\n                largura: 85,\r\n                nome: \"Vínculos\",\r\n                descricao: \"\",\r\n                pagina: Tela_Vinculos\r\n            },\r\n            {\r\n                idMenu: 8,\r\n                largura: 120,//200\r\n                nome: \"Situação Jurídica\",\r\n                descricao: \"\",\r\n                pagina: Tela_SitJuridica\r\n            },\r\n            {\r\n                idMenu: 9,\r\n                largura: 110,\r\n                nome: \"Agressor\",\r\n                descricao: \"\",\r\n                pagina: Tela_Agressor\r\n            },\r\n            {\r\n                idMenu: 10,\r\n                largura: 120,//180\r\n                nome: \"Proteção-segurança\",\r\n                descricao: \"\",\r\n                pagina: Tela_Protecao_Seguranca\r\n            },\r\n            {\r\n                idMenu: 11,\r\n                largura: 120,\r\n                nome: \"Vitimização secundária e terciária\",\r\n                descricao: \"\",\r\n                pagina: Tela_Vitimizacao\r\n            },\r\n            {\r\n                idMenu: 12,\r\n                largura: 120,\r\n                nome: \"Síntese Analítica\",\r\n                descricao: \"\",\r\n                pagina: Tela_Sintese_Analitica\r\n            },\r\n            {\r\n                idMenu: 13,\r\n                largura: 120,//170\r\n                nome: \"Acompanhamentos\",\r\n                descricao: \"\",\r\n                pagina: Tela_Acompanhamento\r\n            },\r\n            /*{\r\n                idMenu: 14;\r\n                largura: 120;//200\r\n                nome: \"Relato de Atendimento\";\r\n                descricao: \"\";\r\n                pagina: Tela_Relato_De_Atendimento\r\n            };*/\r\n            {\r\n                idMenu: 14,\r\n                largura: 120,//135\r\n                nome: \"Encerramento\",\r\n                descricao: \"\",\r\n                pagina: Tela_Encerramento\r\n            },\r\n            /*{\r\n                idMenu: 15;\r\n                largura: 120;//132\r\n                nome: \"Matriz de risco\";\r\n                descricao: \"\";\r\n                pagina: Tela_Matriz_De_Risco\r\n            };*/\r\n            {\r\n                idMenu: 15,\r\n                largura: 120,//135\r\n                nome: \"Referências\",\r\n                descricao: \"\",\r\n                pagina: Tela_Referencias\r\n            }\r\n        ], //dados de entrada, socioidentificação, situação juridica maior e menor, proteção-segurança e vitimização \r\n        [\r\n            {\r\n                idMenu: 1,\r\n                largura: 170,\r\n                nome: \"Dados de Entrada\",\r\n                descricao: \"\",\r\n                pagina: Tela_Dados_Entrada\r\n            },\r\n            {\r\n                idMenu: 2,\r\n                largura: 150,\r\n                nome: \"Sócio identificação\",\r\n                descricao: \"\",\r\n                pagina: Tela_Socio_Identificacao\r\n            },\r\n            {\r\n                idMenu: 3,\r\n                largura: 200,\r\n                nome: \"Situação Jurídica\",\r\n                descricao: \"\",\r\n                pagina: Tela_SitJuridica\r\n            },\r\n            {\r\n                idMenu: 4,\r\n                largura: 180,\r\n                nome: \"Proteção-segurança\",\r\n                descricao: \"\",\r\n                pagina: Tela_Protecao_Seguranca\r\n            },\r\n            {\r\n                idMenu: 5,\r\n                largura: 240,\r\n                nome: \"Vitimização secundária e terciária\",\r\n                descricao: \"\",\r\n                pagina: Tela_Vitimizacao\r\n            }\r\n        ]\r\n        )\r\n    },\r\n    With(\r\n        {\r\n            // Acrescenta a coluna \"larguraCalc\" conforme regra:\r\n            // Se o item for o selecionado (_passoAtual.idMenu), usa a largura definida;\r\n// Senão, divide o espaço restante igualmente entre os demais itens.\r\nmenuCalc: AddColumns(\r\n                menu,\r\n                larguraCalc,\r\n                If(\r\n                    pagina = MenuPassos_20.TelaAtual,\r\n                    largura,\r\n                    If(pagina = Tela_Vitimizacao, largura,\r\n                    ((Self.Width - 100) - LookUp(\r\n                        menu,\r\n                        pagina = MenuPassos_20.TelaAtual,\r\n                        largura\r\n                    )) / (CountRows(menu) - 1))\r\n                )\r\n            )\r\n        },\r\n        // Ordena os itens pelo idMenu e calcula a posição \"distancia\" de cada item\r\n// somando as larguras calculadas dos itens anteriores.\r\n        AddColumns(\r\n            SortByColumns(\r\n                menuCalc,\r\n                \"idMenu\",\r\n                SortOrder.Ascending\r\n            ) As m1,\r\n            distancia,\r\n            Sum(\r\n                Filter(\r\n                    menuCalc,\r\n                    idMenu < m1.idMenu\r\n                ),\r\n                larguraCalc\r\n            )\r\n        )\r\n    )\r\n)"
                  Height: =100
                  TelaAtual: =App.ActiveScreen
                  Width: =1346
      - MenuSuperior_22:
          Control: CanvasComponent
          ComponentName: MenuSuperior
          Properties:
            Height: =60
            Width: =1346
            X: =10
            Y: =10
